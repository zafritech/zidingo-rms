<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      layout:decorator="layouts/main">

    <head>
        <title>Zidingo RMS Item Links</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="UTF-8" />
    </head>

    <body>

        <div layout:fragment="content">

            <div th:if="${links.isEmpty()}" class="row">
                <div class="col-lg-6 col-lg-offset-2" style="margin-top: 180px;">

                    <div class="text-center" style="color: #c0c0c0;">
                        <i class="fa fa-link fa-5x"></i>
                    </div>
                    <div class="text-center" style="color: #c0c0c0; margin-top: 50px;">
                        <h3>There are no active links for this item.</h3>
                        <br/>
<!--                        <h5>Start adding artifacts.</h5>-->
                    </div>
                </div>
            </div>
            
            <div th:if="${!links.isEmpty()}">
                
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            <span th:text="'Links for Item ' + ${item.sysId}">Links for Item</span>
                        </h1>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-9">&nbsp;</div>
                    <div class="col-md-3" style="padding-right: 20px;">
                        <div class="pull-right" >
                            <a th:href="@{'/artifacts/' + ${item.artifact.id}}"><i class="fa fa-fw fa-file-text" style="color: #00aced"></i> Return to document</a>
                        </div>
                    </div>
                </div>
                
                <div class="row" style="margin: 8px 0;">
                    <div class="col-sm-2 links-list-header">Item Identifier</div>
                    <div class="col-sm-9 links-list-header">Linked Item Details</div>
                    <div class="col-sm-1 links-list-header">&nbsp;</div>
                </div>
             
                <div th:each="link : ${links}" th:attr="id=${link.srcItem.id == item.id} ? ${'remote-link-' + link.dstItem.sysId} : ${'remote-link-' + link.srcItem.sysId}">
                    
                    <div th:if="${link.srcItem.id} == ${item.id}" class="row links-list-row">
                        <div class="col-sm-2">
                            <span th:text="${link.dstItem.sysId}">DestinationId</span><br/>
                            <span th:text="${link.dstItem.Identifier}" style="color: red; font-weight: bold;">DestinationIdent</span>
                        </div>
                        <div class="col-sm-9">
                            <span th:text="${link.dstItem.itemValue}">DestinationValue</span>
                        </div>
                        <div class="col-sm-1" style="padding-right: 0px;">
                            <button type="button" class="btn btn-success btn-circle tip-left" title="Outgoing Link">
                                <i class="glyphicon glyphicon-arrow-right"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-circle tip-left" title="Delete Link" th:onclick="'javascript:BootboxLinkDeleteConfirm(\'' + ${link.id} + '\');'">
                                <i class="glyphicon glyphicon-trash"></i>
                            </button>
                        </div>

                    </div>
                    
                    <div th:if="${link.dstItem.id} == ${item.id}" class="row links-list-row">
                        
                        <div class="col-sm-2">
                            <span th:text="${link.srcItem.sysId}">SourceId</span><br/>
                            <span th:text="${link.srcItem.Identifier}" style="color: red; font-weight: bold;">SourceIdent</span>
                        </div>
                        
                        <div class="col-sm-9">
                            <span th:text="${link.srcItem.itemValue}">SourceValue</span>
                        </div>
                        
                        <div class="col-sm-1" style="padding-right: 0px;">
                            <button type="button" class="btn btn-danger btn-circle tip-left" title="Incoming Link">
                                <i class="glyphicon glyphicon-arrow-left"></i>
                            </button>
                            <button type="button" 
                                    class="btn btn-primary btn-circle tip-left" 
                                    title="Cannot Delete" 
                                    onclick="javascript:BootboxAlertSmall('Deletion Not Allowed','Deleting an Incoming Link is NOT allowed. Deletion can only be done from the link source Item.');">
                                <i class="fa fa-info"></i>
                            </button>
                        </div>
                    
                    </div>
                    
                </div>
            </div>

        </div>

    </body>

    <th:block layout:fragment="scripts"></th:block>

</html>